---
title: "2381X Meeting Messages"
author: "Anthony Luo"
date: 2018-10-16 16:00:00 -0500
---
# Robot setup
The goal of the robot was to have extremely offensive power, which meant being able to quickly and effectively outrun and outscore the other robot. Having done game analysis, we determined that having a narrower robot would be more helpful towards getting around opponents, or through openings that we saw (for example, to get balls). Having a faster drive would also allow us to get into a better position to actually score on the flags or caps, and being geared for 240rpm with turbo gears should *theoretically* be faster than using 200rpm V5 motors. V5 motors have characteristics that inherently mean that they will body our robots, and through multiple tests that other teams have conducted, it is highly likely that an 8-motor High speed internal geared drive would be stalled by a V5 drive. 6 motor turbo would be faster, but would take longer to accelerate. With this in mind, we designed the robot to have an 8 motor turbo drive, which would allow us to quickly accelerate to top speed and pressure them. Having a faster drive also allows us to line up quickly (ie, get into position), and effectively score faster (less cycle time). 
We decided to put on a modular lift area, which would allow us to decide between using a descoring arm (for the caps), a simple 6-bar lift, or a full on reverse double four bar lift, depending on the nature of the competition and the opponents that we would be going against (this allows us to have a faster lift, or a slower linear lift, or only a descorer, or even no lift at all). The indexer is a system that can be either driven by the intake system using a tensioned two stage intake/indexer system, together with the entire intake (1:1 geared), or with a separate indexer motor. These allow multiple options, depending on the match play and the dynamic of the match.

# Drive Base
Our drive base is 8 motors, lined up on a c-channel. We discovered this season that we could build the inside c-channels of the drive, put them on, and then mount all the hardware, and then slide the outer c-channel on.
We found that it was possible to run the motors without a bearing motor-side, but the shaft would often flex and hit the c-channel. 
As a result of this, we decided that running a bearing motor-side would be the safer bet. It would introduce friction (reducing the effectiveness of our motors), but also allow us to keep the c-channels usable for longer. On the opposite page, you can see an image of our drive when completed.
IMG[000,001,002]
The completed drive has the motors very close together. The entire robot fits within 20 holes, and thus the drive is 6 holes from c-channel to c-channel. This means that there would be 8 holes between the c-channels, and because the c-channels on the interior are turned flat-part out. The motors are around 4.5 holes in width, which means that there is only 1 hole spacing between the motors, and the way that the chassis is constructed leaves a decent amount of space for motor controllers and wires (as long as we use wire-retaining clips).

---
title: "2381X Meeting Messages"
author: "Anthony Luo"
date: 2018-10-19 13:00:00 -0500
---
# Intake
The first thing that we did this meeting was work on our intake. We started with just a scoop.
We realized that just the scoop, would not be able to pick up the balls. We then decided that we would put on a lower stanced intake with friction mat leading all the way up would be the best. The intake is two stage, there’s one 18T sprocket system with rubber bands on every other sprocket tooth. The second stage is using a 12T sprocket system, and has a little more compression on the ball, which is going to be extremely helpful for our passive intake/indexing system. The first stage is mounted on pillow bearings supported by plates, and the top stage is supported by bars and bearings with shafts running through standoffs. This was the only way we could have everything fit properly and efficiently.
IMG[000,001] 
# Guide Wheels
The next thing that we did was build guide wheels. The point of these wheels are to help facilitate center parking, by allowing sortof an inclined attack (so the front wheels are able to hit at an angle, and aren’t forced backwards. This would allow for faster parking. We experimented with a lot of different sprocket and gear sizes off-robot, and determined that a large 84t low-strength gear with zipties holding on rubber bands would be the best in terms of having the ability to help the robot climb, and also minimizing on the space requirements (the extrusions could be shaved down). 
IMG[002]
# Flywheel
It was determined that having a flywheel ratio of 1:15 would be better for flywheel spin-up times. Our previous flywheel ran 1:25 on two speed motors, and although it was able to keep rotational speed without burning out, it required a spin-up time of around 2 seconds. It also launched the ball with too much power, more than was necessary, especially with close-to-flag play that we generally expect. There was no use for having so much power, especially if it was causing our flywheel to have a long spinup and recovery time. With that in mind, we decided to switch to 1:15. This would give us options between 2400 rpm and 3600, compared to the 4000 rpm previously. Scaling between 2400 rpm and 3600 rpm allows us to quickly change out the internal motor gearings and decide and test. This will have to be done later. The flywheel itself was originally spaced quite wide, but in this iteration we wanted the shafts to be closer. That’s what we tried to do this time.

---
title: "2381X Meeting Messages"
author: "Anthony Luo"
date: 2018-10-24 -0500
---
# Intake
Our intake has finally been added, we used a combination of bars to help point the balls towards the “center” of the robot. 
We implemented an innovative dual-funnel system. Instead of funneling once like a lot of the earlier season robots, we decided to funnel twice. How did we do this? Well, we need to understand how one-stage funneling works. It takes a giant funnel shape in a two-dimensional plane, so when the roller pushes the ball a bit of force is transferred into sending the ball sideways. This then continues until the first roller is cleared, and the ball is elevated up (in place). However, on our system, we have a two-stage funnel system, which means that we funnel twice. How do we do this without one funnel? By cutting it in half, and then rotating one end by 90 degrees. 
IMG[000]
In this image, you can see the different two-stage funnel systems involved. In the far back, you can see the first stage funnel (which is a straight bar), pushing the ball in, and then you can see the second stage funnel (the bent vertical bar), mounted on a small 4-bar. This two stage system works incredibly well, and the vertical part can store two-balls very efficiently.
IMG[001]
# Flywheel
We experimented a lot with different ways to run our flywheel gearbox. The first way that we tried turned out quite terribly, for reference, it included pillow bearings, was incredibly high friction, and was unstable, and bulky - a lot of metal was used to mount the hardware. The solution to this was….quite a journey. We started with trying to chain the flywheel - this would allow us to mount the gearbox farther back, in a location that would be better for weight distribution, with one noticeable downside. The way that we want to mount the towers on the flywheel meant that our gears and sprocket/chain would be super close together. 
IMG[002]
As you can see, the chain is very close to touching the flywheel tower, which normally would be ok. However, it is likely that our flywheel towers will have a bit of flex, so it would be highly likely that the chain would touch the metal leading to friction and inconsistent firing. A chain is also more likely to snap and cause our flywheel to stop. If a chain snaps, there is a low chance of recovery (a chain will not re-click into place). Gears however, if they skip, have a chance of recovering (even if a tooth chips or breaks, a flywheel will usually be able to function). As you can see in this image, the chain is touching a non-moving nylon spacer. This would have increased friction by a lot, leading to a slower final rotational velocity - meaning less energy gets sent into the flywheel, and less energy thus imparted upon the ball.
The flywheel was then changed to have the gearbox directly beside the flywheel, with a cantilevered 12T gear on the flywheel itself. It was incredibly important in our design to have the 12Tooth gear underneath the first stage (or 36 tooth gear). The reasoning behind this is that gravity would help assist the contact between the 36 tooth gear and the 12 tooth gear (gravity pulls the flywheel down, meaning that the 12 tooth gear is pushed “up”). From there on, there is no more cantilevring, which means that the 60tooth gears can drive the 12 tooth gear directly. Since there was no space to put the 60 tooth gears directly below the second stage 12 tooth gear, they were put off to the side. In this instance, there is no need for a motor bearing-side because there’s not much load being imparted into the motors themselves.
You’ll also notice that there’s now bars holding up the flywheel hood, and this change was made in order to help with the feeding of the intake system, and there’s now also a completed intake system. You can see that a lot of these sprockets are hanging off of bars - a non-issue since they are low load, but they are braced across using standoffs - this ensures that both sides are parallel and the sprocket is low friction. There is a bit of wobbble, but it isn’t significant enough to affect the feed path of the ball. 
IMG[003]
# Cortex Mounting
Our cortex is now also mounted in the center of our robot - the idea with this mounting position is to give it the most “space” in the back for a modular lift system. This means that everything should be moved towards the front, but still be easily accessible. The area which we found is quite good because we are able to add all our hardware around it while the cortex is still accessible.

---
title: "2381X Meeting Messages"
author: "Anthony Luo"
date: 2018-11-01 -0500
---
# Wiring Drive Motors
The first thing we did this meeting was work on the wiring for the drive motors. This is incredibly important because last season motor controllers and motors would break during or in between matches, it would be difficult for us to swap in time. There are a few things that we did to help make swapping motors or motor controllers easier. The 4 motors are each run off their own motor controllers, and there are two y-cables on the cortex leading to two motor controllers. Later, these will feed through a power expander, but VEX Shipments have been delayed, so we won’t get our LCD Display and Power Expander until much much later. Same goes for our cable connectors. To get around this, we made two “motor controller” plates for each side, and zip-tied the motor controllers onto the plate (there are two holes on the back of the motor controllers, which seem to fit into the hole spacing on the vex hardware perfectly). Using these, we then zip-tied them across the top of a plate, shown on the right.
IMG[000]
You can also see on the back of the plate that we have our y-cable connecting to two motor controllers. These are zip-tied in between the triangular cut-outs on the plate, as that was teh only way we could fit 5 of them on. The plate itself is attached to the two c-channels on the edge of the robot, allowing us to quickly take off a plate, and swap it back on in case a motor controller fails. This saves us time in the event  multiple failures occur, and doesn’t take much longer than having to cut just one. 
On the other side, the same thing. A plate with 4 motor controllers runs to the motors. The motors themselves are run on a plate which is 8 holes wide and 5 holes tall. On the outside, our motors are wired up, from closest to farthest. This means that if a motor breaks, we can easily trace the wire and replace it. In fact, the motors are zip-tied together instead of using screws, that way to replace a motor or internal motor gear, we only have to replace 4 zipties (2 on each side), and 3 cables on the wiring.
IMG[001]
There was  only one side done at the time of this picture, but because the zip-ties are 3 holes apart, it leaves us 1 hole down the center to wire both sides of the motor controller plates. Perfect. 
IMG[002,003,004]
# Double Anchor Support
On our drive base, we have outer c-channels. However, due to the nature of our robot, it can be very difficult to brace the c-channel on both sides, this means that along the bottom edge of the c-channel there is a lot of flex. To resolve this issue, we use what we call a double anchor support, or DAS for short. 
IMG[005,006]
Now, how a das works, instead of screwing down just to one edge of a c-channel as shown in image 005, you take a longer screw and add 2 nuts to it, as shown in image 006. As you can see, one side is completed and one side is not (left side/right side). What this allows the force along the c-channel to do is to travel up along the screw, and then that side of the c-channel is essentially braced. The same effect can be achieved by using white nylon spacers, however using keps nuts allows you to get tighter to the metal, and thus prevent more sway from occurring. It is important not to overtighten any outer nut at one time, as this can easily deform the c-chanel. Using Keps on the interior is ok, as long as they are tightened down with enough torque. There is no issue with keps, as long as they are tight. Renegade robotics did experiments confirming these. Two locations of this double anchor support allow our outer c-channel to be braced as  well as if it were being braced on both sides by a c-channel (assumnig the one c-channel can take the load).
# Flywheel hood tuning
We tuned our flywheel hood using lexan, and cut multiple holes on it. We realized that we were sending the balls flying too much “up” and not enough “forward” to toggle the flags nicely, so we drilled more holes at the top of the lexan to allow us to move our c-channel forwards, and then “close” the hood a bit. Because our c-channel is mounted on standoffs that aren’t directly on the center of rotation, they wouldn’t be perfect 90 degree angles to the lexan, which is ok as long as we’re able to mitigate that compression bump. The compression was slowly adjusted using the nylon spacers and washers to give us a good combination of forward and up. The final result is that we’re able to hit the flags lined up along the edges of the tile, super easy for our driver.
# Intake Chain Run
The intake chain run was finished up, we managed to get everything chained together. We used a tensioner to keep the contact arc long enough on each sprocket to skip instead of snapping the chain, but also to drive it effectively enough to intake a ball. The tensioner was done by using a screw screwed down all the way using a keps nut, and then by sandwiching white nylon spacers in between teflon, and then capping the end off with a nylock. The nylock allows the spacers to spin freely without coming off.
# Battery Placement
Although our power expander is still not here yet, we have to start thinking about where to place our batteries. Fortunately for us, there is a great big gap in between our rear c-chanel and drive motors, which fits two batteries side by side perfectly. Unfortunately, there is nothing to hold these batteries in, so we cut some c-channel and added some standoffs. This isn’t as quick as clips, but does add weight low on the robot, which is good for us.
IMG[007,008]

---
title: "2381X Meeting Messages"
author: "Anthony Luo"
date: 2018-11-08 12:00:00 -0500
---
This meeting, we added a descoring arm to our robot, and also managed to find some good places for our license plates, as well as add in our final sensors. This is the last build day we have before handing over to our programming and driver.
# Descoring arm:
Our descoring arm concept is simple, be able to drive beside a line of posts, and quickly descore all of them. We used a full length of 2 wide angle, because that was the only full length aluminum that we had left. Most other teams that we’ve seen so far have had descoring arms poiint backwards, but we decided to keep our descoring arm on the sidde because it would allow us to drive past the poles and descore them (without having to reposition each time). We added a flip-out standoff at the end of our arm because we realized that our full 7 section was really close to being able to take down the high caps. The standoff is held onto a screw joint, which is just a screw through a c-channel through a shaft collar and then into a nylock on the end. What this allows is a strong, consistent standoff location. The angle of the standoff was adjusted by switching the places of the second screw, which acts as a physical stop on the flip out standoff. The standoff itself is tensioned in using a rubber band, held down with zipties. Using zip-ties allows us to fine-tune the tension so the standoff stays out when we go to score, but doesn’t get “stuck” in the folded position (because the arm isn’t strong enough to overcome the force of the standoff pushing into the metal). This full length arm is now able to descore all the caps on the poles, which is very good. 
The descoring arm is held on a tower made of 3-wide (yes, we ran out of 2-wide c-channel). This was then screwed into a c-channel going along the length of our base, and was then braced from the side down to a pillow bearing. The reason that we decided to use this was because it would allow us to quickly change out the descoring arm for something else, a lift for exmaple, just that these aren’t finished yet. The actual arm itself is cantilevered on a screw joint, screwed down at the base (stationary screw), then through. The entire arm assembly and gear assembly. Cantilevering here is fine, because the descoring arm is fairly low load and is also screw jointed. It would be worse if we used an axle - much, much worse. Underneath, there is a c-channel supporting a shaft, and in between these two c-channels there goes out gear. This gear goess into our motor, with a reduction of 1:5. Because vex motors aren’t powerful, we use a gear reduction to give us enough torque to knock caps off of the poles. The shaft should not be cantileverd, but the c-channel doesn’t have to support much weight, for this reason, it can be held on with standoffs. Even though they’re quite flexy, they are still strong enough to do this task. At first, the arm would hit the c-channel on the way through, so we moved it down as much as we could to prevent it.
# Final sensor placements
In the end, we have a total of 6? Sensors on our robot. Here they are:
- Optical Shaft encoders (x3)
    - One on flywheel
    - One on Left side of drive
    - One on Right side of drive
- Limit switches (x2)
    - One to check if a ball is in the index location
    - One to check if the ball has fired
- Ultrasonic (x1)
    - Front of robot
- Potentiometer (x2)
    - Two at the front of the robot
- Gyroscope (x1)
    - One in center of robot
Lets go over each of these sensors, and what they’re doing on our robot, starting with the optical shaft encoders.
Optical shaft encoders measure the rotation of a shaft, using “ticks”. There are 360 ticks per rotation, and they keep counting up during a match. Using an optical shaft encoder on drive allows us to see if we’re driving straight, or make precise movements in auton. Optical shaft encoders are very reliable up to about 1300 rpm, and beyond that begin to fizz out because the light isn’t able to detect on the sensor fast enough. However, on a drivetrain, it has a very low speed application and there are no issues with it. On the flyhweel however, we’re using the optical shaft encoder to measure the velocity of the flywheel, and we should be able to use that measurement in code to better control the flywheel. 
So you can see that our drive encoders are mounted on nylon screws, and are outside of the drive. This is because they are pretty big and bulky, and we would do better with them external to our drive. We have long screws going through “nothing” because we didn’t have spacers that fit, and using the nylon screwed down tight works just fine for us. On the flywhee, we took a gear off of the actual flywheel gears. This is so that our encoder is in a comfortable rpm range, and this location hapened to work perfectly.
Limit switches are either on or off, and these allow us to detect when a ball is in the “loaded” position, when it has left the loaded position, and when it has been shot out of the flywheel. We would then be able to use software to control the movement of the ball between these two locations (fired/loaded). And adjust our intake logic accordingly.
Ultrasonics are used for measuring distance, this is mostly used in autonomous to make sure that we are the right distance away from the flags before we make a shot. 
Potentiometers are used for us to select autonomous positions and paths. We are using two, one to select physical position on the field (front red, front blue, rear red, rear blue) which then changes the program that we are running. We are able to load up to 5 programs for each position, for different autonomous paths. 
The gyroscope is one of the sensors that “drifts” in vex. It is affected a lot by passive interference and is not particularly happy near vibrations. We only use the gyro to double check against our encoder counts - it’s not a primary sensor. Our gyro is mounted on a c-channel near the bottom of the robot, which means that it isn’t going to be easily damaged, but it is very suusceptible to vibrations - we have to use it very carefully with good filtering. 
The last thing that we did was mount our license plates. We have a total of 6 license plates, 3 for each colour, two number plates and one vanity plate. The two number plates are held on the side of the robot, as per regulation. We used standoffs on the left side of the robot so that we would be able to quickly change the colours of the plates, and on the right side we screwed both the plates together, so it’ll take a few seconds to unscrew and remount the plates. We aren’t able to put on the quick-change license plates on this side because our descoring arm tower is in the way. Our last license plate, which is our name plate, went above the hood brace. This is a pretty central location, and we can show of our bot!

---
title: "2381X Meeting Messages"
author: "Anthony Luo"
date: 2018-11-20 -0500
---
This log comes after a few meetings, because we didn’t do much work, we spent most of the time on driver practice, and the work done accumulatively across these meetings is equal to one regular meeting, so we will summarize.
# Intake
After running the robot for a little bit, we realized that bars on the intake would not hold up to the rigors of competition - especially not to other robots continually ramming into us. We changed the intake to be 2-wide c-channel, screwed on using nylocks. They didn’t reach all the way, so we used the bars and extended the c-channels reach. Highly unlikely that any robot is going to hit us that far in, and the bar is supported very well. The c-channels themselves were losing position when we hit balls near the edge of the field, and we couldn’t brace to the other inside drive c-channel, so we came up with an innovative solution of using a hard stop to the top of the c-chanel. A small keps nut screwed down stops the c-channel against the other one. 
What this does is prevent the intake from swinging around, and is strong enough to sustain multiple matches.
# Driver Preferences
During the first driver meeting, all we did was experiment with many different control schemes. Here’s a list:
1. Arcade
2. Tank
3. Split arcade
Here’s how each control system works, arcade maps left and right to one single joystick, forward/back mapped to one axis and turning mapped to another axis. The combination of this means that the motion of the entire robot can be controlled from one joystick. That’s the advantage. The disadvantage is that it’s very difficult to control the robot finely, because you can’t make single sided adjustments very easily, and only doing a point turn or driving straight is more difficult (without deadzones in code). The control system is also limited to certain speeds while turning, and not always the max speed. Tank maps each vertical axis of a joystick to each side of the drivetrain. What we have to do to move forward is push forward on both sticks, and to turn we run one side less than the other. This allows us control on the individual sides of each drive. The disadvantage to tank is that both sides need to be controlled together. The last control sccheme is split arcade, which takes arcade and splits it up, so driving forward and backwards is controlled on one axis, and turrning clockwise or counter-clockwise is controlled on another. This means that forward/backwards is independent for turning. This is kind of like arcade where the entire robot is moved together coherently, but is also similar to tank as you need both sticks working to drive. All three different control systems can be driven to an incredibly good standard, and there are great examples for each control scheme. Many teams that have been division finalists at worlds have used these different controls, and at the end of the day any good driver should be able to use any control system and become highly effective with it. 
In the end, we decided to use split arcade, both the main driver and backup driver decided that running split arcade would be the best option. Tank was difficult because it’s difficult to point turn nicely, adjusting for flags using tank is incredibly ifficult because you need a fine level of control to be able to back up, drive forward, and have a good angle during the entire time. Tank is too easy to mess up the angle, and wasn’t as intuitive. Tank also usually meant that we weren’t driving our robot to full potential because we had to think of what each individual side was doing and match them for a good combination of forward speed and turning. Arcade suffers from many of the same problems as tank, going around the field is easier with arcade, but because of the mapping left/right turning while driving backwards is pretty confusing. Split arcade presented us with the best option because it offered a good combination of isolation in terms of the controls, and at the same time coherence between the two sides of the robot that allow us to have smooth driving - smooth is fast. Split arcade removed the ambiguity on what a turn would look like, we can hold a forward speed and turn to adjust accordingly - this is more difficult on other controls. Once we got used to split arcade, it was pretty hard to go back to anything else. 
Our driver also decided to put flywheel and intake modulation on the shoulder buttons because we found them a lot easier to access, and left them as “holds” because that made the most sense. We left descoring on face buttons because we use it less, and are still able to go forward when descoring - perfect if we line up right. 
After a little bit of trial and error, we decided on a few additions to normal driver code. Normal driver code for drive would map joystick values directly to motor values, which is ok, but due to the nature of our robot, the turning speed is much faster, and thus we have to scale the turning. We also have to adjust the turning so that at low speeds, we are able to have enough power to turn smoothly, and at top speeds be able to limit our turning so we don’t wash out. This is our dirver code
As you can see, the horizontal stick is multiplied by a factor, which is taken from the root function sqrt(x). This means that we have a little bit of a ramp up on our turning, and keeps it consistent and controllable for our driver. 
Our flywheel also has a ramp-up and ramp-down sequence. We realized that spinning up the flywheel using motor=127 (the biggest pwm signal possible), is not a great idea because it’s not putting is in the middle of the power/torque curves. By slowly ramping up the flywheel, we are able to stay in the most powerful state of the motor, which actually translates into a faster spinup time. We have a ramp down which allows us to help save the motors a litlle bit, and also save the gears a litlle bit. It slows down a little bit faster than friction at low speed, and a little bit slower than friction at high speed. This means that at high speed we don’t run a risk of the momentum/intertia from the flywheel destroying our gears - especially the 12 tooth pinion gear. At low speeds, this matters less because the gear is better able to handle it. 
Everything else is fairly simple
# Autonomous
As we are mostly a flag robot, our autonomous routines are predominatly flag oriented. There are two different autonomous paths that we use - one class is the “standalone”, which means that our autonomous run is able to run without collaboration with another robot. The second class is “cooperative”. This is probably going to be used later on, allowing us to gain more points in autonomous. All of our autonomous programs for one side can be mirrored onto the other. I’ll start by describing our front autonomous paths. 
# Front Auton path #1
* start pointed towards flags. 
* Drive forward and hit middle flag, toggle low flag.
* Drive back
* Point turn
* Drive towards ball under cap
* Pick - up ball
* Drive back
* Point turn
* Score high flag
* Drive back
* Point turn
* Drive forward towards middle post
* Point turn
* Toggle low flag
The reason we have this auton is because we aren’t sure whether or not picking up a ball will cause our flywheel to jam (in case the ball feeds too far up). By doing this, we’re able to eliminate the uncertainty, this is a very certain auton, that will definitely gain us a few points. Our scoring distance for the flywheel is also designed so that we can hit the top flag from the starting til, meaning that we have a good shot for the high flag after picking up the ball.
There is a variation upon this auton where we start pointed towards the middle/center. Then, we would just point turn 90 degrees before starting. This allows us to confuse the opponents, especially because we have multiple autonomous starting in the same direction.
# Front Auton path #2
* start pointed towards ball
* Drive forward
* Pick-up ball
* Drive backwards
* Point turn
* High flag
* Drive forward
* Mid flag
* Drive forward into low flag.
This auton is a “riskier” version of the previous auton. This one looks “cooler”, and involves less back and forth. This means that we’re able to stay out of our partners way, for example, for a large portion of the time. This autonomous path also gives us greater flexibility in being able to also score on another set of flags, for example, the center flag. Again, the “prime” variation of this exists, which allows us to start pointed towards the flags (as if we were doing auton #1).
# Front Auton path #3
* start pointed towards ball
* Drive forward
* Pick up ball
* Point turn
* High flag (center post)
* Mid flag (center post
* Low flag (center post)
* Drive backwards
* Point turn
* Drive forward
* Low flag
This auton is exclusiely “collaboration”. This allows our alliance to score all of our flags, which is a very big point swing. It is very risky, as we are very close to the autonomous line the entire time - if one sensor count is wrong, there’s a big issue. This also has a prime version, which allows us to confuse the enemy even more
# Front Auton path #4
* drive forward and do nothing
Front Auton path #5
* sit and do nothing
These autons will be run if we don’t have anything to do that match, or don’t want our point swing to be too large (for whatever reason if we wanted to NOT have high ap). These are also good backups if our robot has broken.
Now, let’s talk about the rear auton paths. These also have “prime” positions, but those are selected not with the position pot, but with the path pot. This is because we don’t have enough resolution on the position pot, and instead have to use the path pot.
# Rear Auton #1
* drive forward
* Hit top flag of our post
* Hit low flag of our post
This is the simplest rear auton, and the failure rate on this is incredibly low. The only thing that our alliance partner has to do is go and not be in the way! 
# Rear Auton #2
* point towards ball
* Drive forward
* Collect ball
* Drive backwards
* Point turn
* Drive forwards
* Hit high mid low flag of our post
This is the beefed up version of the auton #1. This is slightly riskier, for the same reasons as stated above - we might not be super great at travelling with two balls intaked. 
That’s the last thing we really have before our competition on this saturday.

---
title: "2381X Meeting Messages"
author: "Anthony Luo"
date: 2018-11-22 -0500
---
This wasn’t really a meeting, just a run through and packing of all our stuff before the competition. We decided that it would be a good idea to take some old t-shirts and “pad” the sides of the box with the t-shirts. This should protect the robot a bit more, and we would also be able to prevent parts from moving in ways that theyshouldn’t and then breaking. The t-shirts also act as a cover, and help to prevent people from getting caught on the robot, or even just as a cover to keep the robot warm (going between 25 degree gyms and -15 outside is not good). We would have used packing peanuts, but realized that...it wasn’t a good idea.
We also realized that despite our robot not being able to climb before, there is now a way for us to be able to climb with our robot. If we get a cap up in front of our robot, we’re able to run that against a platfrom and then park. This takes a little bit longer, but is definitely a viable workaround to the robot. 
We also learend that keps nuts do NOT like to stay tight if there’s intense vibration. On the drive train, and other towres. Keps are perfectly fine, however, on our flywheel hood the keps nuts loosened every time, and we couldnt tighten down enough for us to prevent them from falling off. Our fingers weren’t small enough to put them back on, so we just took bars and braced them that way. Hopefully our entire setup remains stable enough. We are also experiencing a lot of random disconnects from vexnet, not sure why that is.
While three of our four members are competing, one is going to be staying in ottawa working on the cad and design of our second robot. During this competition, we’ll see how the robot does and we’ll be able to come back to school on monday with a plan for the next rebuild. We plan to stay 20 wide, but maybe we can spare a few motors for other things.

---
title: "2381X Meeting Messages"
author: "Anthony Luo"
date: 2018-11-24 12:00:00 -0500
---
# Limitations of Current Robot
Hi, Anthony here. I’m working on the CAD for the next design of our Turning point robot. There are a few issues with the current robot that we never addressed, and I think that the limitations imposed on our current robot with these issues are so great that to fix them to reach the next level of game play, we would basically have to rebuild anyways. Before I start talking about the rebuild, let’s go over the limitations of the current robot.
# Center of Gravity.
The current center of gravity of our robot is well over the front wheels, this is due to the flywheel being very much in front of the front wheels, something that was supposed to be offset with the lift. We realized however, that with the current robot it is unlikely that we would be able to implement our lift. This means that our center of turning is skewed towards the front of the robot, and it is very difficult for us to run autonomous programs and the such with such a skewed center of turning. It also means that when we go forward and stop to go backwards, we “drift” forwards because our front wheel LOSES contact to the ground, and our motors lose their braking effect (because the intake area hits the ground). This is a major issue in faster gameplay.
# Flywheel Intake Path
Our current flywheel intake path is very short, which means that it is very difficult for our robot to intake two balls at one time. The intake path is also not optimized - this is not so much an issue with the build as it is with optimization, but if we are to rebuild this should be considered. The intake path itself is one thing that we want to fix - making it slightly longer would do wonders for us. The intake path is also not tuned, and uses very many sprockets, we should be able to go to less sprockets and run them faster - it currently takes quite a long time for a ball to be intaked and then sent out the flywheel.
# Flipping Floor Caps
Currently, Miffy2-2 needs to run caps into walls or onto platforms to be able to score them. This is a design flaw, because of the way our flywheel towers have been braced. It would be better if we were able to flip caps directly with a big sprocket on the front of our robot, without having to turn around and use a cap mechanism.
# Parking
Miffy2-2 has many difficulties in parking, because of the middle gear. The middle gear doesn’t clear all the way, and because of this it we have to come up with alternative methods to park, which may not all be as good.
# Sensor Distribution
Miffy2-2 has many sensors, but a lot of these could do better in other locations, with mounting to help prevent vibrations and friction.
Now, the general idea for the CAD at first was to make the current robot better, but I realized quickly that it may be a better idea to implement some structures and ideas from earlier on.
# Motor Distribution:
* 8 - drive
* 4 - lift
* 2 - flywheel
* 1 - intake
* 1 - index
You might be asking, how is it possible for us to have 16 motors for functions, allow me to explain.
Drive linked Lift differential. We saw many teams use these differentials in the “In the Zone” season, notably 2131E, 80110H, and 5327A/B. The concept behind these is pretty simple, you have two large gears meshing towards each other, and two motors mounted on a 4-bar with pinions. When the pinions run in the same direction, the gears are forced to mesh in the same direction, which leads to the 4-bar moving up or down. When the pinions run in the same direction, then the gears run in opposite directions and are able to drive something else (perhaps another pinion). 
Having an indexer will be incredibly helpful for us, as we reach higher and faster levels of play, I expect to be driving and hitting flags faster than our flywheel can spin up, and being able to hold those two balls and leave the flywheel running is going to be incredibly important. It is worth considering that a well-modulated front intake can do just as well as an intake-index system, which would allow a third motor to go onto the flywheel, which means there could be more power going into the flywheel, which might also be important. We’ll have to design with both of these in consideration - being able to take a motor off and put it on the flywheel will be very important - this will come with drive practice and testing, as well as coding for intake logic.
Ideally, our intake will be run in a way where it can fire “on demand”, where as soon as we tap fire, the ball is fed into the flywheel. This is again going to have to be achieved with good intake/index/flywheel spacing and modulation. We will likely add a plate lower down on the ground for our intake, because that will allow us to drive around with a ball lower, which means that it is easier for our intake system to “get” a ball, instead of having to constantly run to keep it “in”. Our current flywheel hood compression is very good, and i’m going to try and keep it for the next rebuild.
# Drive Base
I want to keep the drive dimensions the same on this robot as on the last, I think that the way that gearing and chaining worked out in this base is incredible, the chain is a perfect tension, and the gears mesh together nicely. I may be considering going to a fully geared drive, or a fully chained drive - but that’ll have to happen as we move through the design process. The goal of this robot is to have all of the components internal to a 30x20 drive base (what we have, except our sprocket sticks out the front), with the wheels roughly 18x18 holes apart. 
Alright, cad time
CPT_001
Alright, so here you can see the drive base, partially completed. The exact dimensions have changed slightly, in order to accomodate for the fully interior intake. However, everything now fits within the robot, which is very good. The wheels moved back two holes, and the rear motors have turned to face inwards - this is to make space for the flip out claw that we might need to add later on. If we don’t need the space, we’ll move the motors to be the other direction, it’ll give us more flexibility. I’m not sure how I want to link the front and rear wheels yet, because it is incredibly important that they are (in fact, when we turn, our rear wheels are basically scrubbing - we need to have them linked). To do this, I might have to use a chain run between the drive lift differential (dld) or use extra gearing. The gear will prevent us from climbing, so we need an alternative to that. I’m thinking a 90 degree gear run into chain. We’ll need the 90 degree run for dld anyways, and it might be our only option. 
CPT_002
Here, I have the front view of what I’ve done so far on the robot. There’s a tall C-channel on the left for height reference, I want to cap my robot at 30 holes high so as not to break the 18” height limit. The drive wheels have moved forward and backwards a little bit just to make spacing everything easier - I found out that I could push the wheels forward a tiny bit and that then if I got rid of the middle gear, my center c-channel could lie low, as you can see in CPT_003.
CPT_003
In this screenshot, you can clearly see the double anchoring system that we use on our drive base to strengthen outer c-channels, you’ll also notice that our flywheel tower is just *slightly* behind our front wheel. This will aid us a LOT in terms of making sure that our turning point is slightly more to the back of the robot. This location also made the flywheel towers much easier to brace - these towers should be much more secure than the last ones, although if necessary they still *can* be moved forward - I might do this if it makes it easier to mount the hood - we want to keep our hood right now, as I’ve stated, but we could also go with a hood that feeds vertically and has a smaller contact arc with the ball. You’ll notice there’s one 5-wide bracing the towers at the back, and one 2-wide at the front, mounted on many white spacers (to clear the wheel). Had we moved this forward, then there would have been more nylon spacers, which may have added more flex (not sure about this - I’ll have to run tests). The rear is still largely incomplete, and you can see the multiple attempts at flywheel gearing that have been made. The aim of this gearing is to make our shaft across the front of the flywheel as short as possible. By doing this, we can help prevent the shaft from bending. In our design right now, our flywheel hood is likely going to go quite far back into the robot, which could be bad for our general design - this is something we have to watch out for. Currently, we have our intake sprockets mounted on pillow bearings, but that may be changed later.

---
title: "2381X Meeting Messages"
author: "Anthony Luo"
date: 2018-11-24 19:00:00 -0500
---
Anthony again, I’m partway through the drive base cad and flywheel towers and I’ve realized that it would be possible for me to gear my entire drivetrain together - this means that I wouldn’t be using chain on drive and I would be able to put in a set of omni wheels in the middle - this would help our parking a lot! With that in mind, I’m also deciding whether or not to gear the drive on pillow bearings - it’ll allow us to have more “working space” above the robot. Our actual mount points will be the same, but because the gears are lower down, they’ll be easier to clear - which is always a bonus. We are also going to run our motors vertical (probably), because that allows us to fit things in between the c-channels, and also use pillow bearings. Our front motor is currently mounted on the front wheel, which makes intake very difficult. If we gear the drive, we would be able to move the motor back just enough so that we could move the intake in - i mean, in theory. Who knows how it works out in practice. Anyways, into inventor we go! And then we’ll see how it goes. - one more thing - using gearing also makes it easier for us to have the wheels in line, which is easier for calculations using our optical shaft encoders for odometry in autonomous.
CPT_004
Here’s the first attempt that I have made for this setup. Ideally the bearings would be mounted internal to the c-channels, but it seems like that might pose an issue because they’re going to clip with the wheels. To solve this, we’ll have to move them to outside the c-channel (inside the dip). Our drive bracing will also have to be adjusted to accomodate for this change. This also leaves our rear wheel sticking out a lot more than I would like - we’ll have to fix this as well. We could stick the rear wheels out more, moving them down so that the intake is internal - I think having external intake and external wheels just a bit is a good compromise - this can easily be adjusted later as well.
CPT_005
Here we have the drive semi completed. All 8 motors have been added, and as you can see there is a nice long intake path (which means we can mount our flywheel forward). 6 wheels should help us park a lot better, and our intake could also run in between wheels (making parking EVEN EASIER). Things in between wheels won’t hit the parking platfrom because the wheels beside them form a line , and if they’re behind that plane then they are ok. 

---
title: "2381X Meeting Messages"
author: "Anthony Luo"
date: 2018-11-25 12:00:00 -0500
---
This is about 15 minutes into my CAD design work, and I (anthony) quickly realized that it would not be too difficult to do a DLD gearing (drive lift differential). Because we have so many 60T gears, it’s not hard for us to put one in wherever we wanted, and using 8 motors along the base of our robot is a little bit excessive, and makes spacing on the intake very difficult. Using such a transmission, we are able to power a lift (I’ll explain how we can do this with such little range of motion later), and we are also able to save space on the intake.
CTP_006, CPT_007
Here, you can see that we are still trying to keep our robot within 20holes wide. Putting everything clase also reduces slop, because the shaft is able to bend less - the less bending a shaft does, the better it is for us. Here’s how a DLD works. 
This is why the final stage gearing is necessary. In the CAD as of right now, the last C-channel hits the final 60T gear, but this can easily be fixed by using either halfcut C-channels or by moving the C-channel up. In this instance I think that using halfcut C-channels might be the better option - the lift won’t have that much weight. Before I do that, I should probably complete the other side.
CPT_008
Here are both sides completed. You’ll notice that on the left side I did the CAD using halfcut pieces, and that there’s a second halfcut channel on the end, a few holes in. The spacing on these are 7 holes for each arm (14 holes), and 6 for the vertical piece, which means that the entire assembly is 20 holes and can be cut from a full section nicely. We were considering using 3 wide for the lift, so that we wouldn’t have to shave bearings, but after consultation we decided to save the weight and go with 2-wide. Apparently it will matter, according to PiLons lead builder Qaiz. We still haven’t put in bearings, screws, or axles, and haven’t finished bracing on both sides. I’m going to do that next.
CPT_009
Anthony again - I’ve finally added the bearings into the CAD file - it took a little bit longer than I expected, but it’s done. I also changed the bracing on the edges of the c-channels to use 3 hole c-channels, 4 in total for each side which means 12 holes, and then we have 2 4 hole braces across the top for both c-channels, which means that that can again be cut from a 20 section c-channel completely. 
At this point, the length of the arms is 7 holes, and the length of the vertical braces are 6 holes. (20). The issue however, is that if the vertical brace needed to complete the 4-bar is only 6 holes long, it will be difficult to drive the actual 4-bar from the mini 4-bar. But, how does the motion [a]

---
title: "2381X Meeting Messages"
author: "Anthony Luo"
date: 2018-11-28 12:00:00 -0500
---
This meeting everyone was involved, we accomplished a few tasks:
* Competition in review
* Repair overview
* Repairs
* Next Competitions timeline
* Rebuild Proposal
# Competition in review
The competition ended up much better than we expected: we seeded 10th overall, and became the 9th alliance captain, picking 99900A during allilance selections. There were, however, some issues with both the robot and the team structure/organization that needed to be reviewed and improved. 
Starting with the robot: consistency and reliability are better than speed, especially early season. We learned early on that focusing on one thing could get us a lot farther than trying to do multiple things, hence the flyhweel + descore, but we also realized that our robot shouldn’t be built with Keps nuts. Certain parts of the robot experience high forces, particularly the intake area. Our intake area took a lot of force and neeeded to be repaired quite a bit. We didn’t anticipate this, so the best we could do is strengthen it. On the rebuild, we’re definitely going to be looking out for this. The next thing: have backups. The lexan on our hood snapped, and we had to replace it. We only had one backup, so if it had broken again we would have been completely dead in the water. Thankfully, it didn’t. We also should protect that part of our robot a lot more - the lexan can easily be broken through vigorous interaction. 
# Team Structure and Organization
Now, onto team structure and organization. Although our robot was one of the faster scoring robots, we ran into the issue where nobody knew us, and decided not to pick us based on our reputation. It’s incredibly important to have a good reputation, had our schedule been any harder i don’t think many of the good teams would have considered us at all. Even then, when alliance selection came around we realized that we weren’t going to be picked. At that moment, there was a little bit of panic as we weren’t sure who to pick! We hadn’t scouted nearly enough to know who to pick, and the schedule had moved forward, meaning that our team was super confused as to who should be where - we almost missed alliance selection entirely because of that. Next time, we should have someone waiting near the final matches for alliance selection - they should have a pick list and then go up and start reading it off.
Our final matches were pretty good, we ended up in quarter finals and lost by 3 points, or a park. A battery fell out of our partner, so we weren’t able to get the park. One reason why bo1 is annoying.
# Repair overview
There were multiple repairs that needed to occur, most importantly the intake area. In order to accomplish this, we had to dissasemble half of our drive train - something that wasnt super great. We learned however, that next time we should make this much more accessible.
Power Expander → pull power from second battery
Flywheel changes (autonomous code)
* PID to error correct
    * Minimize ramp up time and maximum accuracy and minimuze overshift
Lexan sharttered; so steel hood
There was a screw screwing up the flywheel. On tower brace, it was pulling c-channel forward, which caused our flywheel to lose connection to battery
Bar under intake (to store two balls)
# Competition Timeline
Our next competition is going to be on the 8th, of december. In order to get a fair chance of winnig at this competition, we need a lot of driver practice and autonomous testing - that’s all that we’re going to be doing for the next little while. After that, we have a competition on the 15th. It might not be a bad idea for us to have a second robot ready for the competition on the 15th, as it’s going to be two weeks - enough for a good rebuild if we plan everything out and if we’re able to have enough driver practice and autonomous testing in that time.
# Rebuild Proposal
Anthony here - after the competition on the 8th, I’ve realized that there are a few different ways that we could make our rebuild, one of those involves skids on the bottom of our robot. These should allow us (if our weight distribution allows), to have the rear wheels push the front end of the robot up while the skids on the bottom help us not get caught on the side. We considered using smaller 3.25” wheels, but instead decided that they wouldn’t be faster than 4” wheels on 200rpm. Here’s our idea, we need to be able to outrun v5. In order to do that, we should be running at around 300rpm on 3.25” wheels, or we should be running at 240rpm on 4” wheels. 200rpm on 4” wheels gives a truespeed of around 2500”/s, 240rpm on 4” wheels gives a truespeed of around 3000”/s, and 240rpm on 3.25” wheels gives a truespeed of around 2450rpm, while 300rpm on 3.25” wheels gives a truespeed of around 3050”/s. Adding in friction, running 240 on 4” wheels or 300rpm on 3.25” wheels is our only option. 4” wheels have a rubber with more traction than 3.25” wheels, so we’ll likely be using those. We do also need to consider 5:3 highspeed on 3.25” (around 2700”/s), this has less friction but is slower. 
Our rebuild will likely also feature a gearbox, so 300rpm on 4” wheels might even be feasible if we build it right. This is all going to depend on how we decide to build the robot.

---
title: "Coding"
author: "Andy Kim"
date:  2018-12-01 12:00:00 -0500
---
Andy here: First, we started with setting up the ports for the sensors and motors - doing this properly is super important as it will make the rest of our code more manageable, and easier to work with. Doing this poorly could lead to many more issues later on, which we are trying to avoid.. We decided to use #define precompiler statements for all of the port setup so that we could easily change which port a motor or sensor is connected to without changing every other instance the motor/sensor is used.
 From that point on, we started to develop the robot, and test code alongside. With each motor and sensor that we put on, we had to check to make sure that port numbers were good, and that the sensor was returning appropriate values. Once the robot was finished building, we started testing driver control code, or opcontrol. We had three main parts of the robot that we needed to be able to simultaneously control: the driving, the flywheel and ball intake, and the descoring arm. To allow us to control all three at the same time, we put them in a task each, and multithreaded them. 
After consulting with our main driver, we made our drive a split arcade system, meaning one joystick controls the forward and backwards motion, and the other joystick controls the turning. Furthermore, we scaled the turning component (the second joystick) so that we can do precise turns while moving slowly, and still do fast turns while pushing the forwards/backwards joystick. This allows us to aim quicker and better (instead of overshooting) on the flags, but still be able to take advantage of the speed and agility of our 8 motor turbo drive base.
Throughout testing, we had originally controlled the speed of the flywheel by setting a certain power for the motors, but we later realized that as voltage dropped throughout a match, the flywheel RPM for the same power would also drop, leading to inconsistent shots. We then mounted an encoder to detect the current RPM of the flywheel, and implemented a control loop for the flywheel, in its separate task. The three different control schemes that we had considered were take back half, PID, and Bang-Bang. There was one function that we wrote in util.c ( where we create our utility functions, to be used in both opcontrol and autonomous ), that would return the current flywheel RPM when called upon. This function operates by taking the ticks over time of the flywheel encoder, and then multiplies it by 3 - as we have the encoder geared at a 1:3 ratio from the encoder to the flywheel. We immediately ruled out Bang-Bang due to the stress that is places on the motors, and its inconsistency. Bang bang operates on the principle that if flywheel is at a target RPM, then the motors are set to a lower value (40-60), and if the flywheel RPM is not to speed, we would set motors to a higher value (127, for example). The reason this also had issues is because the same 127 is not constant, it depends on the battery voltage and just wasn’t consistent enough for us. Take back half operates on the principle that you, take the error, take half, and take it back. This was an improvement from Bang-Bang, but it still did not enough precision and speed. PID in the end, was chosen for its superior consistency and ability to precisely and quickly hit and stay at any desired target RPM.
A PID control system works by having 3 different control loops all working together to achieve a fast ramp up, little oscillation, little overshoot, and little settling time. All three loops are based on the error between the current RPM and the target RPM. The P component, which stands for proportional, just takes the current error, scales it by kp (a custom constant which we tuned), and adds it to the current power of the motors. This lets the flywheel spin up at max speed when it is started to ramp up, but slow down when the RPM becomes close to the target and the error gets small. One thing to note here is that we add it to the power instead of setting the power to this value as a traditional PID controller would due to the flywheel needing a certain amount of idle power (different for all RPMs) to maintain each speed. Increasing the P value has the effect of decreasing the spin up time, but also increasing the overshoot. So, when we were tuning the PID controller, we gradually increased kp until the spin up was as fast as we wanted, while having not too much overshoot and oscillation. Next, we moved onto the D component which stands for derivative. The D component returns the derivative of the error over time, which is the difference between the current error and previous error, divided by the amount of time passed in between. This value was then multiplied by kd (another custom ID constant) and added to the power of the flywheel motors. Increasing kd has the effect of decreasing the overshoot, so we slowly increased it until the overshoot was sufficiently small. Finally, we implemented the I component, which stands for integral. The I component is the sum of all of the errors together, and serves to provide shrink the error even further after the error has decreased too much for the proportional portion to make a difference. To implement this, the sum of the errors is multiplied by ki (yet another PID constant) and added to the motor power and increased gradually, while also slightly tuning the other constants to achieve the flywheel behaviour that we wanted.
To use this for driver control, we mapped the most general purpose RPM, which we found to be 3200, to the right shoulder button of the master joystick. This RPM was used for all flag shooting from the front of the field. Other RPMs that were useful, but more limited in use, such as for shooting from the back of the field, were put on the face buttons of the partner joystick. Furthermore, just in case the encoder for the PID controller breaks in the middle of a match, we added a manual override system on the partner joystick that changes the flywheel system to Bang-bang. We realized this was very important when our code failed once during a match because the encoder stopped returning values entirely. 
Having finished drive and flywheel control, we moved down onto the next movement functions, “auxiliaries”, if you will. This includes the intake, and the descoring arm. The intake is controlled by the left “shift” buttons, the top one we call the shoulder, and the bottom one we call the trigger. The trigger runs the intake in reverse, while the shoulder runs the intake in “feed” direction. This allows us to control the movement of the ball within the intake area, even allowing us to intake 2 balls at once even though the entire system is run by a single motor. Since the option to run the intake outwards was also available, the driver could intake a ball, run intake outwards so that the ball is at the bottom of the intake, and take in another ball. We ran one competition with the descore also on face buttons, but realized that that wasn’t going to work out the way that we wanted to, as it was impossible to fully drive the robot while also moving the descoring arm. With that in mind, we decided to move the descore to a joystick on a partner controller, which allowed for very fast descoring.
Moving onto the autonomous code and sensors, we have the flywheel encoder, as mentioned before, encoders on each side of the drive base, an ultrasonic sensor at the front, and a gyro sensor on the bottom. But, due to having issues with various sensors (right drive OSE stopped returning values, ultrasonic was returning way too unreliable data even after being filtered, gyro damaged during transportation to our St Catharines competition) and not having replacement sensors available, we only used the flywheel encoder, and the left drive encoder.
To make autonomous and skills coding easier and and clearer, we created various utility functions, namely driveStraight and pointTurn. DriveStraight takes in a number of encoder ticks, the power to run the motors at, and the direction of movement (forward or backward) and drives straight for the specified number of ticks. Similarly, pointTurn takes in a number of encoder ticks, the power to run the motors at, and the direction of movement (clockwise or counterclockwise) and turns for the specified number of ticks. We originally had error correction using the two driver encoders that would compensate if one side of the drive was running faster than the other, but we had to remove that part of the code when the right drive encoder broke. Also, since this part of the code was gone, we had to manually make sure that the left and right side were running at the same speed. We found that the right side of the drive base moved about 10% slower than the left side, so we manually scaled down the power given to the left side of the drive, as can be seen in the code below.
After this, writing the autonomous code was just measuring encoder tick values and applying these functions. One other functionality we implemented was the option for choosing between multiple autons on the fly, using two potentiometers. One potentiometer is used to choose between the four starting positions available, and the other is used to choose between the autons available for that position. At the moment, we have 8 working autons, 2 for each starting position, and we hope to expand that to 24 separate autons as the season progresses. Here is one of our 8 autons.

title: 2381X Meeting Messages
author: Anthony Luo
date: 2018-12-10 16:00:00 -0500
This meeting mainly discussed the rebuild, or iteration three of our main robot. During this meeting we discussed limitations of the current robot, future intended capabilities, and also outlined a few metrics that our rebuild should be able to go by. The first and most important decision for us was still to decide the “playstyle” that we wanted to pursue. We, at this point, have gone to three competitions and we have a good idea of what the other robots in the region are (at least, early season). Knowing this, we can gauge where the robots are going to continue to go - which is incredibly important as it changes the physical aspects and dimensions of the robot. 
The difference between an offensive and defensive robot, and a robot designed to encounter defense, and one designed to outrun is very different. We have always ran a drive base faster than 200 rpm so that we can outrun v5 - we find this incredibly important as we are unable to provide more torque on our drive, and would thus burnout in a pushing match. With that decision having been made, it follows logically that our robot should retain a small form factor so that it is able to “slip” past opposing robots, as well as offering us more options on-field.         
Generally, the accepted dimensions of a robot (in terms of base width), range from 25 holes wide (12.5”), or 30 holes wide (15”). We have continually challenge this by having a robot be either 35 holes wide and 20 holes wide (17.5 and 10” respectively). Compared to a 30 hole robot, our robot is only 5” narrower, a difference that seems negligible at first, but really becomes apparent in matchplay with heavy defense. 
With this in mind, we also need to compare between the difference between the three different types of punchers.
Eventually, we decided to choose the double catapult, this offers a few distinct advantages over either a flywheel or a puncher. Why is that?
# Cycle time.
A double catapult can hit two flags very very quickly, albeit from one location on field. The reason why this is so important - we anticipate heavy defense, and although flywheel and double puncher allow us to change the angle of our shot very quickly and very easily, we don’t know if we’ll ever be in a situation where we can accurately predict our motion and take two shots. With a double catapult, we’re able to drive into position for just a split second, and then we’re able to take a shot and score two flags, an 8 point swing. 
# Motor Distribution
With a flywheel or angle changing puncher, it often requires multiple motors that can’t be linked to achieve the same task. That is, you need 2 motors on flywheel, 1 intake, 1 index for a flywheel system to score as fast and as efficiently as a catapult system, while an angle changing puncher requires 1 puncher, 1 angler, and 1 intake. 3 motors. None of them can be linked to other tasks very easily, and you’ll often require 2 motors on puncher. (those two motors can be linked, but you still have two other unlikable motors because they need 2 degrees of freedom). With a double catapult, all you need is 2 catapult, 1 inatke AND those two on the catapult can be linked together with a dmd style transmiission, allowing lift and catapult to be driver by the same two motors - something incredibly important for us.
# Size + weight + complexity
This is by far the simplest to build, the smallest, and the lightest. That’s an incredible benefit for us who want a light and fast robot. That’s all there is to it, punchers are complex, flywheels are very heavy and have a lot of rotational mass - catapults are simpler, legit a board that goes up and down, and you hit flags with it. The transmission does add complexity, but the complexity on a catapult transmission is very very simple.
Our lift, and exact dimensions and spacing still need to be established, but we are in the process of CADing our robot, and designing our robot.
Before we get straight into building, there’s a few things that Anthony has to say about building and CADing the robot first. We don’t like to CAD the entire robot out before we build - but we do like to CAD out general sections, add to it as our build progresses, etc etc because it allows us an incredible amount of flexibility in terms of visuallizing subsections, and knowing how much space we can allot to each. When I design robots, I tend to start wiht a general idea of the base, CAD the base, and THEN go to build the base. After that, I hold up lengths of C-channel on, around, over the base to get a sense of where stuff should go, how it should go, and where it might fit. Using motors in person also allows me to visualize how much space they’ll take up (which is a big issue when you go 20 wide, believe it or not). Using real life models also allows me to place items in a point at 3d space, and visualize around it. In cad, there is very little concept of space , and moving stuff around is quite difficult and quite odd. With that being said, I don’t think CAD for this robot is incredibly important. At this point in our season, we have established the general outlines, and are re-using CADs from previous robots (same base concepts, etcetc.). It has become faster for me to experiment and build in person rather to build in CAD, mostly because in person I have faster parts variablitiy. In the end, we may choose to finish a cad and include it, although the robot becomes complex enough where the CAD model slows down our computer to the point of being unusable, and is incredibly unhelpful for us. Tracking CAD progress is also difficult, screenshot management on windows is particularly terrible.
A quick note about the notebook style over this build
As we are building this robot over the break, we will have irregular meetings, and the developments made over these individual meetings lasting anywhere from 5 to 10 minutes may not be recorded. This is to make our lives easier, and allow us to develop a robot faster - notebooking takes a significant amount of time. With this in mind, we will be taking notes at the end of each development ‘period’ or cycle, this will become apparent as we develop our notebook. There are no dates for these meetings as they may span one day, or multiple days. 

---
title: "2381X Meeting Messages"
author: "Anthony Luo"
date: 2018-12-23 13:00:00 -0500
---
# The Drive Base
All I did today was develop the drive base, we went through multiple iterations before I finally decided on a drive that would work well. Originally, I had wanted to put our omni wheels on the middle holes of the C-channel. We tested this with 12T sprockets and motors mounted, and we were unable to produce a clearance that would allow us to climb onto the platform. This was one big issue we wanted to address from the previous build, because our robot could NOT climb onto the center platform without having to use a cap (for ground clearance). We realize now that if we just backed into the platform at speed, we would be able to park, just not “safely” (we wouldn’t be touching the ground). The rebuild however, should be able to park, and I have one requirement for the base size - it NEEDS to be able to double park into our C team robot. This robot has been designed with the idea that we will be partnering with a robot similar to C if not C team itself. This means that we have to have clearance that can get us up the platforms and a bit more easily. So, this meant that I’d have to raise the base on pillow blocks. The reason we’re using 12T sprockets and chain? It makes it easier for us to link 8 motors together, and with our previous experiences on chain, it doesn’t really break. We’re hoping that the tensioning we put on this time allows our chain to seat nicely with the sprockets, and allow for efficient power transfer. Hopefully, we are able to do this. At the moment, I have 3 motors mounted, on the base rails themselves, one vertically at the rear (this makes it very easy to make one shaft go through the motor and the wheel, and then go out a bit more (if we wanted to run encoders, for example). The rest of our motors use normal 3” shafts, and go through bearings facing internally on the bottom hole of the C-channel. Why? Why would I run the motors on the *bottom* hole of c-channel, making clearance more difficult? Because that way I could have metal on metal contact with the cross brace. Does this have any advantages? Yes - it means that our entire robot is less twisty, there’s less flex, and is better able to handle being jostled around. It means that we can get by with only having one main cross brace, instead of having to use two. Will we end up using two? Very likely, but having this one right now gives me an incredibly large amount of flexibility with WHERE we mount the second one, otherwise, we’d likely have to mount the second one farther away. 
Update: half an hour later, I’ve figured out the chain run and where the other motors should go. 
IMG[000]
The last motors (4th motor per side, or 7th and 8th motor), are going to be mounted above the interior pontoons and rails. This is not a bad place to put it, as it allows me a large open area in the back, perfect for something like a cortex! Before that however, allow me to explaining the theory of tensioning and “contact arc”.
# Contact arc
Contact arc is very important, especially on 12T sprockets. The smaller the sprocket, the more you have to be wary of the contact arc. A small contact arc (closer to 0 degrees), means the chain bends less around the sprocket, and has less contact with the sprocket. This has the advantage that the sprocket will not be likely to break the chain, because the force is more evenly distributed across the sprocket, but the force transferred to the sprocket may not be as good, because there is physically less meshing between the chain and the teeth on the sprocket. With a larger sprocket, this becomes less of an issue for chain snapping (assuming proper tensioning), but does become an issue for power transfer. Bad contact arc can mean that power isn’t transferred all the way through, or is transferred in a non-efficient manner. 
# Tensioning.
The more a chain is loose, the more likely it is to skip isntead of snapping. There is a very fine balance between a chain that is too tight anda cahin that is too loose. If the chain is too loose, motors and sprockets will skip, but if the chain is too tight there will be extra friction and the chain is MUCH more likely to snap. Ideally, there is a little bit of slop in the chain (slop being the amount of play the chain has), but there can’t be too much slop, otherwise skipping and play occurs. 
On a 20-wide robot, it is especially important to understand that our turning speed is much faster than say, on a 30 wide. This measn that our entire drivetrain is working harder to turn the robot the same amount , more strain on motors, cahin, sprockets, everything. Why? Imagine a long stick, mounted on a point. It’s harder to psuh it around from closer to the rotation, which is exactly what our robot is doing. The wheels are scrubbing against the ground at the same speed, so we are rotating faster. This also means that our center of gravity has to be good, if it is not, the rear wheels will be suspect to an INCREDIBLY large amount of “wheel scrub”, which is incredibly inefficient. 
IMG[001]
The cortex is shown mounted, on left. We chose this mounting point for multiple reasons. The first, and probably most important, is easy accessibility. Mounting the cortex here should mean that it is very easily accessible, that way if we need to swap wires, the cortex is easily accessible. This also means that swapping a cortex (which yes, we have done multiple times now), is easy and not terrible. The other thing is, it leaves us enough space in the back for mounting another cross brace (useful for defense - we have a bar that we can use to push people with), as well as our encoder wheels. The plates that the cortex is mounted on also offers some amount of “shock” absorption, which should help protect the cortex somewhat - heavy shocks to the cortex aren’t good and can easily damage the internals, which is why mounting it on a leaf-spring system should be a little bit better. 
After the drive has been mounted, I asked: where do our encoder wheels go? Actually, before that, what are encoder wheels? Encoder wheels are free-spinning wheels attached to encoders which will allow us to do “odometry”, which essentially gives us exact position and orientation of the ship on field. In order to account for all variance, error, and potential wheel slip, 3 wheels are needed. These 3 wheels are going to be attached DIRECTLY to encoders through a shaft (to eliminate slop through gears and chain), and there are 3 wheels that need to be placed, 2 parallel, and one perpendicular to the other two. We decided to place the two parallel encoders going forward/backward (this was the easiest to find locations for, and has been our generally assumption so far in terms of pseudo code). The farther apart these wheels are, the better, but with our robot being 20 holes wide nominal, it is very difficult to find space for these encoders, however it was eventually done.
IMG[002,003]
Here, the front encoder wheel positions are shown. 3.25” wheels were used as mocks because we could not obtain 2.75” wheels (they are currently experiencing shipping delays). For this reason, we are using 3.25” wheels to mock the locations of our encoders. Yes, 2.75” wheels will fit a little bit better (that smaller diameter is all we need to have it sit in a nice location), and will offer us more resolution. The farther apart they are, the more resolution we get in terms of turning - that’s why we want them apart. However, due to our circumstances, 6 holes (3”) is the best that we can do from edge to edge. If this doesn’t give enough accuracy, we will likely move the encoder wheels to be external - this brings along it’s own host of problems which we will address later. 2.75” wheels should also NOT extend past the c-channel, although even on 3.25” wheels there is no issue with this.
Our rear wheel placement is a little bit easier, because we again have the space at the back that has been “carved” out already. Here, a wheel should fit perfectly.
IMG[004]
Here, in the back, we can see the location for our last encoder wheel. It fits VERY nicely in the little nook that we have made, and we are still able to brace over it. It is centered with respect to the rear wheels, however we may decide to mount it on a banded mini 4-bar so that it is able to move when climbing (if we deem it necessary). This will have to be established through testing, and we have two options for the shaft on this wheel - we can either choose to run the shaft close to the wheel, with the encoder basically touching the wheel, or we can choose to run the shaft all the way through the underbody of the robot, which measn that we can place the encoder internally (whichever ends up being easier, I guess).

---
title: "2381X Meeting Messages"
author: "Anthony Luo"
date: 2018-12-24 13:00:00 -0500
---
# The Intake
The first thing that I think I should talk about is the testing for our intake. We started with a generally idea of what we wanted, large sprocket feeding into smaller sprockets. This means that we’re able to get something coming out in front of the sprockets, so we can bull balls off of caps during autonomous (recycling balls as a 20 wide robot can get a little bit difficult). This means that space IN FRONT of our top rollers are incredibly crucial. The location of our main sprocket was given to us after some quick CAD work (constraining the top of the ball to the inside of the sprocket, and then approximating to the nearest hole). We decided to use a c-channel, because that would allow us more mounting options later on. We had originally tried to use pillow bearings, but after the last rebuild, we realized that pillow bearings are incredibly difficult to mount to. After that, our top sprocket location was determined by placing the sprocket, holding down c-channel, and seeing what fit the best. This took about half an hour, and went between two main revisions. The first revision mounted our secondary intake on standoffs, with long c-channels. This was incredibly wobbly, and after moving the robot around for a few minutes we realized that this probably wouldn’t hold during a match. With that said, we also realized through testing that there is an odd spot between sprockets, where the ball doesn’t *quite* feed as nicely as it maybe should, because there’s a gap between the sprockets (which is inevitable, yes). We fixed this on our older robots by using friction mat, and we expect that we are likely able to do the same here. After we tried the standoffs, we moved the c-channels holding up the sprocket onto the cata towers - this is much more secure, and do to the unique mounting nature of the cata towers (0.25” - half a hole) apart from everything else allows us to bring the sprockets even closer together, to the point of almost touching, but not quite. 
IMG[000]
On the left, you can see the C-channel being mounted on standoffs, and that the holes don’t line up (our cross brace uses 2 0.375 spacers, which results in a spacing of 0.75”. As you can see, there is a large gap between the two sprockets. This was soon changed.
IMG[001,002]
Here you can see both sides of the C-channel now mounted onto the tower bracing of the robot. This means that the gap between the two sprockets is a lot smaller. On the right side of the robot, we had to stack two c-channels on top of each other because we no longer had a single piece long enough. The long piece we had before had to be used for our cata tower bracing, which I will explain in a second.
The last part of the intake (not sprockets themselves) is the plate that carries the ball upwards. Our plate last time, was one of the factors preventing a front-park. We thought that intakes had to be low, and close to the ground to pick-up balls. This time, we’ve moved the plate up a lot, and we’ve realized that if we just put a thin layer of friction mat (which we’re going to be doing anyways), it will be able to intake just fine. 
IMG[003]
As you can see on the left, our intake plate has a slight curve, and is quite far off the ground. This enables us to park from the front, or the rear (with additions - i’ll talk about these in a second). With a larger intake sprocket, the wheels also have enough force to go up and over. If we don’t bend the intake, however, it wouldn’t be able to pick up the ball. It has to give the ball some force as it curves up, but the exact amount doesn’t matter too much (yet). Why am I able to mount lower in between the wheels? This is because the wheels will contact the platform, or the bump. Essentially, there are two contact poinst that the wheel will make with an object at a certain point in time (each wheel has one with the object), this draws a line, and combining multiple of these lines together creates a curved surface. Inside that curved surface, as long as both wheels are contacting, they won’t contact the item itself, as the wheels will contact. However, if the item is mounted in between the wheels, and only one wheel contacts, then the item may make contact with the surface, as the other defined guide point doesn’t exist. In this image, you’ll be able to see that the plate doesn’t contact the platform.
IMG[004]
# Drive Modifications
Throughout the day, I made quite a few different drive modifications. I’ll walk you through them one by one, and explain the purpose of each. 
IMG[005]
Here you can clearly see the box-bolted interior of the C-channel. The purpose of box-bolting the inside is because that way the c-channel going across is protected, and isn’t going to be wobbling around. We decided not to box bolt the outside because we thought that the c-channel running along the outside would need the extra stability. This is because it is longer, and has to run more things off. It also did help that we didn’t box bolt the outside bc it made mounting points so much easier (as you can see, our towers are braced onto it). You’ll also notice that we have added a tensioner in front of the raised 12T sprocket, which is used to help prevent the chain from hitting the cross c-channel sa well as from skipping over the gear.
IMG[006]
This shows the tensioner in more detail, where we’re able to have spacers going all the way across (low friction).
IMG[007]
Here is the rear tensioner. You can see this is slightly different, this is because there is nothing on the other end to keep it on. Thus, we put a screw into a 1” standoff, and then screwed in from the other side. This allowed us to get the screw on as tight as possible (both the screws bite into each other because they meet in the middle of the standoff), and then we fit spacers on with washers. This means the screw is not likely to come loose, and the chain is adequately tensioned. We used a 45 degrees c-channel because it’s the smallest size we have, and gave us good options for mounting points. This c-channel also has a little bit of flex, so that we’re able to prevent the chain from snapping under high load. We may later switch this to a full c-channel so that mounting is easier.
Lastly, we mounted bars at the front of our robot so that we would be able to climb. What happened was the front of our C-Channel would run into the lexan plate above the platforms (it was JUST not tall enough for some reason). With that in mind, we put down these guides. These elevate the c-channel just a bit before we contact the platform, and allow us to slide on effortlessly. 
IMG[008]
Here you can see how these guides contact the platform before we do. These are smaller, lighter, and more efficient than guide wheels. We have plans to extend these so that they’re going to allow us to drive all the way up onto the platform. We have many MANY plans to improve these, and are going to be extending it all the way back to slightly behind or in front of the wheel (using standoffs). This should allow us to get an EVEN SMOOTHER climb :).
# Catapult
Again, our catapult operates on the principle of a DMD transmission. This means our two gears spin one direction and then fight, allowing motors on arms to move up and down, while running them opposite means that they can drive the catapult. Now, this can also operate off of 1 motor and a ratchet, however we aren’t entirely sure whether or not we wanted to run a ratchet on our catapult for now, and 2 motors doing this is going to be a lot faster than 1 regardless. With a DMD style transmission, we should also be able to remotely control a cap mechanism (should I need to). The most important part for any of this is having good build quality - in order to do this, our towers need to *not* fall apart on us, and need to stay stable (so our shooting stays consistent). In order to do this, we want our towers to be braced from both sides, so that there can’t be any movement (limit the amount of freedom), so, we use a c-channel on one side attached to the cross beam, and then we use a c-channel on the other side, attached to a c-channel that we drop on.
IMG[009]
The c-channel here is put on standoffs so that they will be able to brace against the bottom hole of the c-channel. We could do box braces, but we realized that the source of our issue was the c-channel below it flexing. To prevent this, we secure it in two locations and then there’s nowhere for it to “bend”. 

---
title: "2381X - Merry Christmas! Double Catapult is rarted!"
author: "Anthony Luo"
date: 2018-12-25 13:00:00 -0500
---
So, anthony here. I rewatched some match footage and realized that doing a double catapult is totally ridiculous. You have 1 point to defend against. Flywheel is so much better in terms of autonomous. With that said, the entire robot spacing has to change because the way flywheel works is totally different from the way catapult spacing works. Our setup is going to look as follows:
* 6 drive
* 2 flywheel
* 1 intake 
* 1 index (linked to ball collector).
* 1 lift
* 1 cap-flipper
6 turbo motors won’t give us the pushing torque that we necessarily want, but if we’re able to control our motors, should allow us to get a pretty good amount of pushing done if we know how to transfer weight. The most important thing with 6 motor drive is still going to be weight distribution (we HAVE to be light), as well as linking the motors together - if we don’t link the motors, we’re in for some BIG trouble.
So, most of this is similar to the previous robot, just re-done for some better weight distribution. Our ball collector is something that can come down in front of our robot, and grab balls off of the platform or off of the caps, which should allow for an extremely full-fledged autonomous program (we can get 5 shots off JUST FROM THE FRONT), and then with a flywheel it doesn’t matter necessarily where we’re shooting from.What we noticed with a flywheel is that it has a very high consecutive shot speed (look at first robotics 2017), and we anticipate that robots are going to be making a lot of consecutive shots in game - this is where catapult speed falls behind. 
The reason we want a ball collector is so that we can get additional balls in autonomous, this is very important as it could technically allow us to clear the entire front row of flags if we play our cards right and are able to accurately track the position of our robot. The lift and cap flipper I think are going to be important, however they may be taken off in lieu of more drive motors (should we find ourselves needing that by the competition date).
As always, our robot will have wedges which are designed to take weight off the other robot and make it harder for them to get away. The rest of the robot will be explained as the build occurs.

---
title: "2381X - Provs Bot"
author: "Anthony Luo"
date: 2018-12-30 13:00:00 -0500
---
So. This robot is going to be our provs bot. I metup with andy and we decided the following distribution for our robot. We want to go 30 wide, and have space internally for tracking wheels of all sorts, have either a 6m or 8m turbo drive, a flywheel, intake, and index system that will allow us to collect balls from off the cap. I have a decent idea of how I want everything to look, and again I want the ball intake to “step” the ball up in between the wheels, then get carried back and up. It is going to be incredibly important in this rebuild that our ball path is optimized - speed will be incredibly important. I believe it’s likely that we will spend a lot of time tuning the flywheel hood as well as the ball intake path. 
With 30 wide, we can fit most of the important things in the back - cortex, batteries, drive motors. We can elevate the drive motors above the wheels, and then gear or chain them up. We intend on using a drive similar to 5225A’s from last season, which gave a lot of space internally. We want to keep drive spacing roughly the same as we have now, which should be good for just about everything. We will however require a large amount of custom cut-shaft lengths if we intend to do what pilons did, I have a proposed solution which makes our drive slightly wider, which involves adding 0.5” extra space in the back. This should still allow us to have tracking wheels around 7.5” apart (assuming drive is going to be 6 holes nominal, and then adding 2 holes on each side for our gears, gives us a total width of 8 holes per side, leaving us 14 holes in between sides, which goes to around 7”. This doesn’t give us the widest distance, but then should still give us a decent amount of resolution for our tracking purposes. Mounting the wheels this way with an external channel also saves us some C-channel for bearings - maybe not a bad deal. Our flywheel hood will be cut out of lexan, this will probably be done once we return to school, in the meantime we’ll focus on getting drive up and running nicely, as well as intake and index running smoothly and efficiently (every bit matters now!).

---
title: "2381X Meeting Messages"
author: "Anthony Luo"
date: 2018-12-31 13:00:00 -0500
---
So I spent a little bit of time dismantling the older drive, and spent some time working on the new drive base. We want to use two seperate c-channels going across the front and back of the drive base, this will give us a lot more flexibility in terms of mounting everything. We can run a whole setup of gears at the back, with a full suite of proper gearing, and then chain it up to the front. We started by looking at other drive bases of a similar style, and asking around to see what we should be looking out for. Here were a few problems that we’d identified (that are common).
# Low-Strength Axles (or regular axles)
There are low-strength axle issues, a lot. A large amount of torque going through gears will cause the axle to deflect and bend. Low strength axles will also wear out if metal rubs against them (for example, lock bars). 
# Low-Strength Gears
Low strength gears have an issue where they will flex and bend - this can cause them to interfere with other parts, or become misaligned and introduce friction. Low strength gears are also plastic, and the inserts can totally round out, and if we’re using that to transfer power into shafts we can very quickly stop sending power.
# Wheel inserts
Wheel inserts suffer from the same issues as the low strength gears, and if wheels round out - we’re done.
# Friction
Friction is a big killer - we want to make sure that there’s a little bit of play between the sides of non-moving bearings and the moving wheel assembly, about 1 teflon washer, and we want teflon between all moving parts.
Today also included a little bit of prototyping on the drive, that included setting up the “pilons drive”, which meant bolting together gears sprockets and the wheel. 
IMG[000]
Here you can see how everything is bolted together. There is a High Strength gear on the outside (so that power can be transferred through the gear into bolts as well as shafts), an 18T sprocket (this should allow clearances with C-channels without needing excessive tensioning, and then the wheel. The entire assembly fits into 7-hole spacing as you can see on the left.
IMG[001]
Now, in order to make everything fit, we had to reduce the amount of “spacers” we used, thus the wheel is seperated from the bearing by a space of 2 teflon washers (this is necessary because otherwise indentations in the plastic wheel housing catch on the bearing”, and that goes straight into a shaft collar (still necessary, for some reason), and then into sprocket and geared with just enough spacing to comfortably clear. 
As I stated above, Shafts (especially low-strength ones), often have inserts rounded out. To solve this issue, we sent bolts all the way through - this way, we can transfer power through the bolts instead of the shaft - much nicer. 
IMG[002]
This bolt has not yet been zip-tied to the spoke, but once it is zip-tied down, it shouldn’t be moving much. These are precautionary bolts, but nonetheless are reassuring to have. 
IMG[003,004]
I also experimented with a few different methods of box-bracing today. Previously we have done screws with nuts, as shown in image 003. Today, I tried to do something like image 004. This is a lot simpler to maintain (ie if it needs to change spots), but I find that it does not “brace” as well as the screw through method.

---
title: "2381X Meeting Messages"
author: "Anthony Luo"
date: 2019-01-01 13:00:00 -0500
---
Anthony here - Today, the drive for the robot was built. After last time, there were a few issues that we ran into, that we fixed. One side of the drive was then completed, with all 4 drive motors mounted, bearings in place, shaft collars in place, and battery mounted. There are still modifications and improvements to be made - however, this should be pretty good for now. 
First requirement: 1:1 turbo drive on 4” wheels. This gives us a free speed of around 3000”/min, or around 4 feet per second. This free speed allows us to cross the field very quickly, however the true speed of our robot is going to be much closer to v5’s true speed of around 200rpm. We anticipate that other robots with v5 are likely going to be running 200rpm 1:1 ratios on their drive, which is why it is important for us to be able to outrun them. 8 motors on drive is likely going to be our safest ratio. At some comps, we may try to run a 6 motor drive by taking off one of the motors, and if that works nicely, we may be able to run 6 motor drive and leave two extra motors for additional functions - the tradeoff with 6 motors is that we lose acceleration, something that we might want to keep as v5 motors keep roughly the same torque from 0-50% speed (electronically limited). This means that they will accelerate very very quickly (as discobots as demonstrated soon). 8 motors gives us less strain on each motor, which means that we can get closer to truespeed (or freespeed), and we are able to get there faster. This math has been done with CIM motors before, between 6 CIM and 4CIM drives. Fortunately, we don’t need to worry about brownouts. We are using gears all in the back so that we can get direct feedback from wheels into motors - reducing backlash and shock load. 
IMG[000,001]
I started with what was there last time, except this time I finished both sides of the drive. From there, I started stacking the gears above in order to check sizing. The first thing that I started with was a 60T bolted to a 30T, both of the HS variant. The idea is that we can use large 60T gears to transfer power in a 1:1 ratio, and then 36T gears will allow us to fit a lot of motors into a very small space. The original mock was just done with 2-wide, and whatever standoffs would fit in the space. Image 000 is the very first mock that we did, here there are no bearings, and this was just a straight size fit. I experimented with different placements of the 36T gears, as you can see from the C-channel stacked on top. This has not yet been screwed in, and is merely here for a size reference. I took motors and held them up to the channel using quick 0.25” 6-32 screws screwed in by hand - this means they will stay (no breaking motors), and will also allow me to mock multiple motors. Image 001 shows the gear s attached, with a shaft going through and one motor mounted. Here, you can see that the standoffs need spacers on the end for the gears to clear, however this was later changed because I had not added teflon to the gears when I mocked it up. Once I added the thickness of teflon, the nuts on the 36T gear dug into the omni wheels rollers, creating additional friction.
IMG[002,003]
Here you get a good sense of where motors need to go, there are two shafts visible, and one motor already mounted. This prompet me to change from 2-wide to 5-wide (stacking 2-wide is heavier than five wide). Five wide also meant that spacing for that vertical gear is easier. I was originally only planning on having motors on the outside of the robot, however as you can see in image 003, there is a very low chance of a motor fitting on the outside of the drive without a large amount of overhang. This, mounting all the motors inside would be the only option.
IMG[004]
After the switch to 5-wide, the gearing was done again. I realized that leaving the motors vertically would help somewhat with cooling, and would also mean that I could mount the motors closer together (they would need more space mounted in the other direction). The added benefit of this is that with the introduction of the last gear, there is half the additional friction being introduced, because the gear is only touching one other gear - and not two other (as you would in a 2x2 matrix). Image 004 shows the firstr mockup for sizing. The large HS 60T gear was swapped out for a smaller LS 60T gear, but the 36T gear was left as a HS gear. This is because the large 60T gear is less likely to break, however. As soon as I can however, I will swap the 60T gear out for a HS one, and add a few teflon washers - there is no need for the two to be bolted together - just the metal inserts will be better.
IMG[005]
Image 005 shows us how the motors look once they are setup properly. You’ll notice that all of them have zipties - this is so that we are able to quickly swap out the motors or internal gears should one fail. This mounting is also beneficial as the two forward motors get better airflow - this may not be very important in matches, but every little advantage will be helpful. The other two motors at the back should get airflow just from moving around, and they cannot be mounted vertically even if we wanted them to be. The last thing is that we are able to mount standoffs better with this setup - we have more mounting holes.
IMG[006]
Image 006 shows the top of our gearbox - here you can see the bearings mounted - the external five wide is braced in three points, which well be braced even more later on. These 10 holes were exactly as we planned it to be, which is very good. 
IMG[007]
Image 007 shows us the back of the gearbox. Here again, you can see the spacing that holds everything together. The battery is currently mounted on half inch spacers, but if that is shortened to 0.25” spacers, we should be able to move the external plate out just by a little bit and swap the LS 60T gear to a HS60T gear - if we want to do this and risk  friction against chain, I am not sure yet. Again, the point of the battery mounting is so that we are better able to access them, swapping them out before competitions. This also gives us a very visual indicator of whether or not our batteries are even plugged in (we have forgotten this before).
IMG[008,009]
Images 008 and 009 show the bracing underneath the 5-wide. Here, the internal C-channel on our drivebase is shorter than the external C-channel on our drive base (I’ll explain in a second). The focus here is on the standoffs. We attempted to create a balanced use of all spacer sizes (so that we wouldn’t overuse one and run out). There is a standoff near the back of the 5-wide (we could not get to the very back because of the motor mounting) There is a standoff near the middle, and there is a standoff near the very front. These two standoffs create three points of contact, which means that the 5-wide mounted above the standoffs can be centered more naturally (more definitions upon the path of a line). Here, we used spacers beacuse box-bolting with nuts would have taken a long time, and would be incredibly difficult to implement. Spacers in this instance, beside the box bolting, also helps the box bolting be the appropriate size (if you mess up boi bolting, you can easily bend the c-channel outwards or inwards - spacers prevent that. 
IMG[010,011,012]
Lastly image 010 shows the drive base. As previously mentioned, the interior C-channel and exterior C-channel do not line up. Image 011 also shows this pretty nicely. The reason that the interior C-channel is moved upwards is so that we were able to get more room up front, to be able to attach an intake channel at the front holes of the drive channel, for example in image 012. 
Currently, our drive is very flexible, and we will definitely need another brace - one brace will not be able to hold the torque across the drivebase.  Where this one will go, we can solve later. I will also need to put standoffs across the pontoons, so that the flex between the actual pontoon is reduced. 

---
title: "2381X Meeting Messages"
author: "Anthony Luo"
date: 2019-01-02 13:00:00 -0500
---
The first thing that I did today was rebuild the gearing on each side so that we would have High strength (HS) gears. Previously, I had tried bolting the gears together. There weren’t enough clearances with the wheel. In order to solve this, we switched to an Low strength (LS) 60T gear, for a variety of reasons, mostly that it would clear better. This time however, I eliminated bolts from the equation. Now, normally HS gears have inserts, one is green free-spinning and one is a metal (steel?) square insert, to adapt form HS shafts to LS shafts. The issue that I am afraid of, is that when you transfer all of the power from 4 drive motors into one gear, going across one shaft, it may bend, flex, and we lose the amazing properties of a geared drive, which is instantaneous response. The solution we implemented was mating the two gears directly with a HS insert - while then passing a LS shaft through. The entire setup. This means that we are able to use the same shaft (which is much better) than splitting a shaft), and we are able to transfer power through the HS shaft insert, and LS shaft as well - this means that we should have almost 0 delay between force coming from the motors and force going into the gear on the wheel, which is then transferred through to the wheels through LS shafts, bolts, and sprockets - however, all of these are using metal on LS shafts - better than Plastic which the LS gears use. How do I make this gearbox? Start with the gears shown in IMG_1522(jan2,2019), and then put the insert into one gear IMG_1525(jan2,2019). Because the other insert goes halfway, the insert here is also only going to go halfway. However, because this one is designed to go through an entire gear, it sticks out a bit. Once it’s in, you can place the second gear on, and it will fit nicely, as in IMG-1526.
Once this gear setup had been finished, the gears assembly was mounted and spaced off on the drive. IMG_1521. Here you can see the gear assembly - 0.25” spacers were added to the standoffs so that we would have clearance on the top 36T gear - this gear is spaced using delrin spacers because the regular nylon spacers are too wide in outer diameter to fit. You can also see that there is a slight difference between the top 60T gear and the bottom 60T gear, this is because the top 60T gear has an extra teflon washer in order to clear the screwheads on the motor screws. Fortunately, this does clear the sprocket and chain system. 
I added to the drive later the battery mounts and a cross-brace. The first thing that I did was move the battery mounts as far in as I could, this means that I could potentially get a protective plate around it on the outside, and balance the weight on the plates even more. In IMG_1534 you can see that the battery mount sits flush with the exterior 5-wide plate. This was achieved by using the thin (non keps) nuts, which are 0.125” thick, and then 0.5” screws with a bearing block, and 0.25” screws without. This means that 0.25-0.06=0.19” of the screw head is left out on the other side, which is just enough to clear through the battery mount and then the nut without exposing the screw and risking damage to the battery. The battery mount was also chosen so that there would be clearance with the various other nuts (around 0.15”). From there, clip mounts were determined so that the battery could remain as flush as possible with the plate. IMG_1536 shows the height of the battery mount on the right side of the drive. It is mounted here so that we are able to prevent other robots from hitting the batteries and damaging it - we anticipate most robot contact to be around the height of our drive-channel, and mounting the battery that far up is mostly for sizing and precaution. You can also see that taking spacers away from the battery mount means that our battery can fit behind a standoff (not all the way out), which means there is space for us to put up a protective cover. The next thing that I would like to talk about are our battery extension mounts - these are mounted in a way to keep the battery cables safe - we don’t want to risk our cables being caught on something. In order to prevent this, the cables should be tensioned towards the back just a little bit, but loose enough so we aren’t breaking connectors. The battery connector needed to be raised by half an inch because it needed to clear the rear c-channel (the wire coming out from the back). We then realized that we would be able to mount plates outside of the battery, and they would fit better. This helps to protect our batteries, not to mention they fit so nice. IMG_1540, IMG_1542, IMG_1544.
In the last image, you can see that there is a large cross-brace going across the back. The point of this is to help protect the drive motors (in the occasion we find ourselves pushing somebody else), and also braces the top of the 5-wides. With C-channels that tall, and with that many motors on them, they statr to flex and bend in weird directions. With the cross beam, we’re able to prevent this flex. You’ll notice that we used 0.25 spacers on the outer plate, and thus it won’t line up with the holes on the cross brace. We solved this by cleverly using zipties to hold the two pieces of metal together - this won’t brace per se, but will pull the two flat pieces closer together, making angled motion more difficult, and therefore bracing it and reducing flex as you can see in IMG_1535.
The last thing that I did today was work on the intake, or start on it. Before this however, I played around with cortex mounting positions - having a flat area in the back is going to be very fun!
Ok - intake time. The intake should be made out of as light and low-clearance material as we can. Currently we are using 3-section (15 hole) 1xL pieces, however we may switch those out for full 2-wide C-channels. This is because the 2-wide should clear the way we have them setup, and will be a little bit stronger. IMG_1533 . Here you can see the 1xL coming inside the robot. 1XL is lighter, but we might need to cancel out the weight from the motors in the back, and this might mean using heavier materials up front - this can be changed later. You’ll also notice in IMG_1533(jan2,2019), how the main c-channel for the intake is mounted. We used a C-channel mounted around the bearings nuts, centered with the wheel (so it would clear), and then attached a fat 2-wide to the bottom. This is centered with bias towards the rear, which gives it a very good angle for an intake up front. The reason we used box bolts on the bottom c-channel is because we wanted to use the c-channel going across the bottom to also help brace the drive - this solves the issue of our bracing on the drive (yes, we did also add standoffs inside the c-channel, you can see them in IMG_1547. However, beacuse our drive channels are 7 holes apart, our c-channel has extra holes - not an issue, everything still clears. The sprockets are held apart using standoffs, which are 6”. 4 6” standoffs, we used a 1x3 section cut out of a 3 wide c-channel (c-channel metal is thicker than plate or bar metal), which helps to prevent the bars from misaligning and twisting too much - which can happen from elastics being tensioned improperly. We have a 6T gear on the end, which should allow our intake to spin very fast. On both sides, c-channels support the sprockets so that they are able to clear the wheels (just barely), and they are faced inwards so we can get the widest possible intake (so that we’re able to get the washers/spacers on the inside of the c-channel, not taking space away on the edge of the c-channel. This also means that we need some spacers on the sprockets themselves to make it as wide as possible. In IMG_1545, you can see that the intake spans almost the entire way across. Later, the second stage was added, this will move the ball up to a platform that is raised above the clearance of the drive, so that we are able to park (and not be limited by our intake).
As it stands right now, we have just enough clearance to park. IMG_1546 shows our robot in a parking position, in this position it will have the least clearance possible from the front wheel, and as you can see the lower edge of the c-channel is probably the lowest that a brace could be mounted on before we are unable to park. IMG_1565 shows the current state of the second intake - we have mounted c-channels on the inside of the drive channels, and then we have c-channels on standoffs above that. The issue with the current setup is that there is too much compression on the ball, thus upping the torque needed to move the ball up. We hope to solve this issue simply by adding in a spacer or longer standoff, to make it so that there is less contact with the ball. 

---
title: "2381X Meeting Messages"
author: "Anthony Luo"
date: 2019-01-03 13:00:00 -0500
---
Anthony back here again - today I spent a lot of time working on the robot, but not much was accomplished - a lot of it involved test fitting parts and pieces. In the end, we had our flywheel intake path figured out - which is a very crucial part of the robot. This took around 5 hours, and was a very VERY painful ordeal. 
The general idea of a well tuned intake is that it’ll bring the ball up quickly, and into a “primed” position quickly. From the primed position, it needs to be able to feed into the flywheel quickly and easily. Our intake needed to raise the ball above the drive, and then bring it up a bit, otherwise the sprockets would not fit - that was our original plan. Unfortunately, this means that we are sacrificing a little bit of vertical height, but we are also gaining a better feed angle - we don’t need to go around 90 degrees, and that means the ball has less of a path to go through. The VERY FIRST thing that we did with the drive was find the minimum clearance that we would need to get it working. Once we had the clearance set, we mounted a 1xL across the bottom of the drive, as you can see in IMG_1575. This half cut gives me a visual indicator of where my clearance is set, and everything has to be built on or above that in order to clear. Now, I tried using bars, plates, and a variety of other materials shaped in different curves to intake the ball up. In the end, standoffs worked the best, they would center the ball and are very rigid. Friction matting will have to be added to the standoffs to help increase traction (rubber bands work too!) but that will probablyy be added when the hood and plate are swapped properly. The top of the intake has some bars attached to it, so the ball has a better angle to work with. 
The next thing was mounting the flywheel towers - in order to do this we needed to move the intake 5-wide forward by just a little bit, one hole. IMG_1581 shows the different aligned c-channels. The left side has moved, the right side hasn’t. The flywheel towers are mounted on spacers, with two c-channels on each side holding up the tower. This means that the tower is braced incredibly well - especially considering how low it is braced. On this tower, the flywheel can be mounted. The other side was then mounted, you can see the standoffs in IMG_1589. The last stage intake was then mounted on 1xL, using a normal bearing (this will be changed to a pillow bearing on a floating tower.
The last thing we did was experiment with tracking wheels.e Something similar to IMG_1596. Our first attempt resulted in a very not fun sizing arrangement as you can see in IMG_1588, however we realized that we can canti axles and it should be ok - this gives us a lot more room to work with.

---
title: "2381X Meeting Messages"
author: "Anthony Luo"
date: 2019-01-08 13:00:00 -0500
---
There have been quite a few improvement since last time, i’ll start with the most obvious changes, and then go into some smaller things.
The first area of improvement is our flywheel gearing. This went through multiple concept and prototype stages before it was completed. The entire time we did keep the same ratio, but the way the gears were stacked, and the way that the floating tower was braced. Eventually, we ended up with the gearing that you can see in IMG_1628. The final 12T gear is mounted below the 36T gear, and the upper 12T gear is mounted above - this means that we are able to make everything a lot more compact, and drop the flywheel height some more. The first few iterations, we wanted to mount the final 12T above - this would give us more space for a stronger shaft collar, however we eventually reached the conclusion that a regular shaft collar would suffice, and the drop in height would be a greater advantage in terms of clearances for the rest of the robot. We have to use black spacers on the upper 60 T gear in order for it to clear the 12T gear (OD clearances), however this isn’t much of an issue as the new LS gears tend to stay put. In IMG_1631 you can see how close the final 36 and 12T gears are, in fact the 12T gear is sunken into the c-chnnel so that we have more space in the back. This is currently a metal pinion, a HS variant, however it will soon be swapped out for a LS gear - this will help lower friction and since the force on this final gear should be small, even though it is cantilevered, it is close to the bearing and should be ok. The biggest concern is that one bering is holding uptwo shafts, however this should be ok if we are able to maintain good build quality. The floating towerss are supported using 4 hole c-channels, which are currently still moving around as we add in the rest of the robot. 
The next thing that we worked on were tracking wheels. The idea behind tracking wheels is that we will get an absolute position of our robot on field - this can be incredibly useful when we’re running long autonomous programs, and especially so if it becomes more complex - for example clearing a bunch of flags - something which requires precise positioning and tracking. IMG_1632 shows the very first prototype we made of the tracking wheels, in position. We need two tracking wheels per side, and then one in the middle perpendicular to the other two. As you can see here, the two wheels were originally mounted on c-channels coming down from themiddle of the robot. This was later changed to give us more space down the center for the perp wheel (perpendicular middle wheel), by using longer screws and screwing in from c-channels dropped from the frame. IMG_1643 shows how we used a 5 segment 1xL, bearing, screws, and spacers to create a much smaller setup. VEX bearings have an issue where the intenal bearing is not perfect, so cantilevering wheels like this is the best for us because we are able to reduce the friction on the encoder - no need to go through multiple bearings. This setup was mirrored on the other side, with one change - the encoder was kept in the same orientation so that the cables would come off the top. This means that we needed spacers off of the 1xL to keep everything at a distance that could be hung of a screw. A standoff was added off the end later so that the wheel would not go past the rotational stop, because if it did then we would be at risk coming off the platform (it might’ve over-rotated o something, causing forces going through the wrong angle and the wrong thing being the stop). IMG_1646 shows the current progress, with an incredibly tall perp wheel mounting. This works for now, so we’re going to keep it. Once I have time, we will move it lower so that there’s less risk of it breaking. The perp wheel is special, as it runs an extra bearing (this is important because this wheel is taking a lateral hit when climbing the platform), IMG_1647 shows an up-close look at the wheel. This has been made out of 3-wide c-channel, and allows us to add another bearing and an encoder onto both sides of a 2.75” omni. This was sorta mounted however it would fit, vis-a-vis a 2x2 c-channel. The lower this is, the better it will be (at the moment it hits the other encoders and does not have a fun time).
The last thing that has changed so far is the intake path - yes, it has changed. Again. This time the intake is completed with motor mount, and all that is left is mounting an indexer and a proper hood. We used aluminum plates to help size the hood, and will cut a lexan out with the same sizing as soon as we figure it out. I’ll start with the changes we made to the intake.
1: we changed the banding on the main sprocket. In IMG_1647 you can see the edge of a sprocket. Here you can see how the banding wraps around a screw and then goes back over the teeth - this means that we are able to tie the rubber bands together in the center, as shown in IMG_1667. This allows there to be less overall tension on the rubber bands - we were experienceing issues with the full-width rubber bands snapping due to over-stretching. A well made knot in the middle of the intake also gives the caps a better “whacK” as there’s more weight and tension going around. We found it also made the actual intake better on our stepper bar because it gave the balls just a little bit more contact or something - but we don’t want to depend on that. The screws are normaly 0.5” screws, and at first I wasn’t sure if the screwhead would be able to keep the rubber band on, but after a few quick trials, it seems to work fine (no need to add a washer or anything!). IMG_1668 shows a front view of the intake, here you can see that we’ve moved the indexer forward, closer to the front side of the tower - this means we have a longer flywheel hood path, but it seems to be around the same angle as before, but makes feeding everything a lot easier. The top roller is an 18T, hopefully this will give us enough control over the ball motion - a large 24T doesn’t fit nicely, and an 18 is generally a perfect sie. At the moment, it is not centered, however it should be centered soon. Hopefully the centering doesn’t matter because we won’t have a hardware refererence tocenter to. Then, we worked on getting the entire intke chained together. The only sprockets that would fit on our shafts were 6t sprockets, which meant that those were put on. We wanted the intake motor as low and close to the front as we could (to help balance weight), so we mounted it on a standoffed c-channel in IMG_1692. This C-channel assemlby holds the pillow bearings for the 6t sprockets, a chain tensioner to keep the chain off our wheels, as well as a large 24T sprocket fed by a motor. This gives us a ratio of 1:4, so i can either run 400rpm, 640rpm, or 960rpm. In my opinion, 960 sounds the best because it gives us a very very VERY fast intake, and also stalls the motor out (ie the motor doesn’t haev enough torque to bring the ball up past the index), so that we don’t run the risk of accidentally shooting. Running 400rpm (the other tested rpm) has enough torque to push both balls up and over the index. 640 might be a good middle ground too, because 960 is very aggressive and can easily stall if we don’t know what we’re doing. The indexer is either going to run 1:1 turbo (240rpm), or 3:1 on an external ratio (300rpm or something slightly higher). This should allow us to intake a ball from the wall and be able to shoot as soon as we are in position. IMG_1700 shows a front view with the completed motor, you can see that the motor itself is very low and close to the rollers (the lower center of gravity, the better). IMG-1702 shows a close-up of the actual assembly.
With our intkae, we also added in our flywheel hood. We have a unique way of mouting ur flyheel hood and tensioning it that gives us a lot o options for change and adjustment, especially for fine tuning. We have mounted the standoffs holding down the 2-wide of the flywheel hood on a C-channel which is then mounted to our main towers. This gives us multiple levels of adjustment that straight mounting would not give us. It would also give us a lot more strength. IMG_1696 shows the final mounting positions that we chose, we used the middle hole on the tower so that we would be able to mount a 0.5” spacer properly (this was not necessary, we could have used 0.5” standoffs or a shaved spacer), and then picked the lower hole to mount the flywheel hood. This is still currently tentative, as we are unsure as to the compression of the hood. Once LEXAN or a non-shattering plastic (mayhaps delrin), we will be able to drill some mounting holes in the plastic and do some firing tests. AT the moment, the metal hood is there only for visual sizing purposes. The hood distancse can alsobe adjusted by using spacers. An encoder was mounted on the other side, you can see in IMG_1697 how this has been mounted. Currently there is nothing holding the encoder down - I plan to secure it very very soon.

---
title: "2381X Meeting Messages"
author: "Anthony Luo"
date: 2019-01-10 13:00:00 -0500
---
Okay - so a few things were done today. 
1. Tracking wheels
2. Plate mounting
3. Cortex and battery expander mounting
4. Auton selection device
5. Wiring started
6. Robot weighed.
The first thing I did today was clean up the back of the robot. Previously we had tracking wheels banded in the setup shown in IMG_1709. This was a setup with the loop-through-loop banding technique, which is quick to setup but meant we had long runs. We shortened the runs drastically and changed out for some cleaner looking rubber bands to give IMG_1724. The black rubber bands and shorter runs cleans up the entire setup a lot, and it looks a lot cleaner. - it also makes it easier for us to put a plate in the back to protect everything. The only worry here is that the standoffs might not be able to hold the weight, so I tightened everything down just a little bit more, and added in another brace. IMG_1729 shows our bot with the finished banding, at this moment we were loading code onto the robot. You can see how the black rubber bands blend into the robot a lot better - the black rubber bands also stretch very nicely. We also put on white spacers at the end of the standoffs so that the rubber bands would not slip off in the event that the elastics pulled the standoffs down at weird angles. 
Plate mounting. Our plates have always been mounted above the batteries, but today we confirmed the placement of the batteries (our robot doesn’t tip!), so we bought some battery clips so that we would be able to put one clip per plate, and then quick swap the plates by literally clipping them onto the battery - that’s pretty fast! 
Cortex and battery expander mounting. It’s very important that the cortex is mounted somewhere that is easily accessible, and same with the battery expander. IMG_1734 shows the chosen location for our cortex and battery expander. The battery expander can go along the back because it is thin and narrow, while the cortex is able to just go off to one side above a gearbox - it is supported with a c-chnannel on one side and standoffs on the other side. This means that our cortex is VERY easily accessible, especially! The power switch and the vexnet key location - these are very important because we plug and unplug from the cortex often. The cortex mounting being slightly inward also means that we have space to wire our sensors and motors, and swap them around if something is broken. IMG_1725 shows again, the mounting. Here you can see clearly how the power expander is mounted, and how the battery cables are run. These runs should allow the battery cables to lay flat and straight - the less looping we have, the less likely it is for another robot to become entangled and break something. The actual auton selection device will later go into the empty space in front of the battery expander. The auto device 
